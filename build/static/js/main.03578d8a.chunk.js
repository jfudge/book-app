(window["webpackJsonpbooks-app"]=window["webpackJsonpbooks-app"]||[]).push([[0],{103:function(e,a,t){e.exports=t(141)},109:function(e,a,t){},110:function(e,a,t){},136:function(e,a,t){},137:function(e,a,t){},138:function(e,a,t){},139:function(e,a,t){},140:function(e,a,t){},141:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(8),l=t.n(o),c=(t(109),t(37)),i=t(38),s=t(44),m=t(39),u=t(45),d=t(9),p=(t(110),t(17)),h=t(11),g=t.n(h),b=t(19),f=t(20),E=t.n(f),v=function(e){localStorage.setItem("token",e)},k=function(){return localStorage.getItem("token")},w=(t(76),t(169)),N=t(174),y=t(181),O=t(175),j=t(53),C=t.n(j),S=t(58),x=t(78),I=Object(x.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(img/books.jpg)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),L=function(e){var a,t=e.setUser,o=e.hideLogin,l=Object(n.useState)(null),c=Object(d.a)(l,2),i=c[0],s=c[1],m=Object(n.useState)(""),u=Object(d.a)(m,2),h=u[0],f=u[1],k=Object(n.useState)(""),j=Object(d.a)(k,2),x=j[0],L=j[1],D=function(e){"email"===e.target.name?f(e.target.value):"password"===e.target.name&&L(e.target.value)},B=function(){var e=Object(b.a)(g.a.mark((function e(a){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,E.a.post("/api/users/login",{data:{email:h,password:x}});case 4:n=e.sent,r=n.data.data.token,v(r),t(r,n.data.data.user._id,n.data.data.user.firstName),s(null),o(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),s({message:e.t0}),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(a){return e.apply(this,arguments)}}(),A=I();return r.a.createElement("div",{className:A.paper},r.a.createElement(w.a,{className:A.avatar},r.a.createElement(C.a,null)),r.a.createElement(S.a,{component:"h1",variant:"h5"},"Login"),r.a.createElement("form",{className:A.form,autoComplete:"off",onSubmit:B},r.a.createElement(y.a,Object(p.a)({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"email",id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:D},"required",!0)),r.a.createElement(y.a,(a={variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onChange:D},Object(p.a)(a,"required",!0),Object(p.a)(a,"autoComplete","current-password"),a)),r.a.createElement(N.a,{className:"submit",onClick:B,type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Log in"),r.a.createElement(O.a,{container:!0}),i&&r.a.createElement("p",null,"Sorry, your login or password was incorrect!")))},D=Object(x.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(img/books.jpg)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),B=function(e){var a,t=e.hideLogin,o=e.setUser,l=Object(n.useState)(null),c=Object(d.a)(l,2),i=c[0],s=c[1],m=Object(n.useState)(""),u=Object(d.a)(m,2),h=u[0],f=u[1],k=Object(n.useState)(""),j=Object(d.a)(k,2),x=j[0],I=j[1],L=Object(n.useState)(""),B=Object(d.a)(L,2),A=B[0],W=B[1],T=Object(n.useState)(""),q=Object(d.a)(T,2),F=q[0],U=q[1],M=function(e){"email"===e.target.name?f(e.target.value):"password"===e.target.name?I(e.target.value):"firstName"===e.target.name?W(e.target.value):"lastName"===e.target.name&&U(e.target.value)},Y=function(){var e=Object(b.a)(g.a.mark((function e(a){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,E.a.post("/api/users/signup",{data:{email:h,password:x,firstName:A,lastName:F}});case 4:n=e.sent,r=n.data.data.token,v(r),o(r,n.data.data.user._id,n.data.data.user.firstName),t(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),s(e.t0),console.log(i);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(a){return e.apply(this,arguments)}}(),z=D();return r.a.createElement("div",{className:z.paper},r.a.createElement(w.a,{className:z.avatar},r.a.createElement(C.a,null)),r.a.createElement(S.a,{component:"h1",variant:"h5"},"Sign Up"),r.a.createElement("form",{className:z.form,autoComplete:"off",onSubmit:Y},r.a.createElement(y.a,Object(p.a)({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,type:"email",id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:M},"required",!0)),r.a.createElement(y.a,(a={variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onChange:M},Object(p.a)(a,"required",!0),Object(p.a)(a,"autoComplete","current-password"),a)),r.a.createElement(y.a,Object(p.a)({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"firstname",label:"First Name",type:"text",id:"firstname",onChange:M},"required",!0)),r.a.createElement(y.a,Object(p.a)({variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"lastName",label:"Last Name",type:"text",id:"lastName",onChange:M},"required",!0)),r.a.createElement(N.a,{className:"submit",onClick:Y,type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Sign up"),r.a.createElement(O.a,{container:!0}),i&&r.a.createElement("p",null,"Success!")))},A=t(176),W=t(172),T=Object(x.a)((function(e){return{root:{height:"100vh"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},margin:{margin:e.spacing(1)}}})),q=function(e){var a=e.hideLogin,t=e.setUser,o=Object(n.useState)("login"),l=Object(d.a)(o,2),c=l[0],i=l[1];T();return r.a.createElement("div",{className:"login-modal"},r.a.createElement("div",{className:"login-wrapper"},r.a.createElement(O.a,{container:!0,component:"main",className:"classes.root"},r.a.createElement(A.a,null),r.a.createElement(O.a,{item:!0,xs:!1,sm:4,md:7,className:"login-img"}),r.a.createElement(O.a,{item:!0,xs:12,sm:8,md:5,component:W.a,elevation:6,square:!0},r.a.createElement("div",{className:"login-body"},"login"===c&&r.a.createElement(L,{hideLogin:a,setUser:t}),"signup"===c&&r.a.createElement(B,{hideLogin:a,setUser:t})),r.a.createElement("div",{className:"login-footer"},"Need an account?",r.a.createElement(N.a,{onClick:function(){return i("login")},variant:"outlined",size:"small",color:"primary",className:"login"===c?"active":void 0},"Login"),r.a.createElement(N.a,{onClick:function(){return i("signup")},variant:"outlined",size:"small",color:"primary",className:"signup"===c?"active":void 0},"Signup"))))))},F=t(80),U=t.n(F),M=function(e){var a=e.cancel,t=e.finishDelete,n=e.book,o=function(){var e=Object(b.a)(g.a.mark((function e(){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(n._id),e.next=4,E.a.delete("/api/books/delete/".concat(n._id));case 4:r=e.sent,console.log("Deleted: ".concat(r)),t(),a(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"show-more-wrapper"},r.a.createElement("h4",null,"Are you sure you want to delete this book?"),r.a.createElement(N.a,{variant:"contained",color:"primary",className:"cancel",onClick:a},"Cancel"),r.a.createElement(N.a,{variant:"contained",color:"primary",className:"submit",onClick:o},"Delete"))},Y=(t(136),t(171)),z=t(57),P=t(12),_=t(180),J=function(e){function a(){var e;return Object(c.a)(this,a),(e=Object(s.a)(this,Object(m.a)(a).call(this))).handleChange=function(a){e.setState(Object(p.a)({},a.target.name,a.target.value))},e.handleTimeChange=function(a){e.setState({bookDate:a})},e.handleSubmit=function(){var a=Object(b.a)(g.a.mark((function a(t){var n;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),a.prev=1,a.next=4,E.a.post("/api/books/new",{headers:{Authorization:"Bearer ".concat(k())},data:{title:e.state.title,author:e.state.author,date:e.state.bookDate,userId:e.props.userId}});case 4:n=a.sent,console.log("Created new record: ".concat(n)),e.props.setShowAddBook(!1),a.next=13;break;case 9:a.prev=9,a.t0=a.catch(1),e.setState({message:a.t0}),console.log(e.state.message);case 13:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}(),e.state={title:"",author:"",bookDate:new Date},e}return Object(u.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"add-new-modal"},r.a.createElement("div",{className:"add-new-wrapper"},r.a.createElement("h4",null,"Add New Book"),r.a.createElement("form",{autoComplete:"off",onSubmit:this.handleSubmit},r.a.createElement(Y.a,{onChange:this.handleChange,type:"text",name:"title",label:"With normal TextField",id:"title",placeholder:"Title",className:"classes.input"}),r.a.createElement(Y.a,{onChange:this.handleChange,name:"author",type:"text",label:"With normal TextField",id:"author",placeholder:"Author",className:"classes.input"}),r.a.createElement(P.a,{utils:z.a},r.a.createElement(_.a,{name:"bookDate",variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"bookDate",value:this.state.bookDate,onChange:this.handleTimeChange,KeyboardButtonProps:{"aria-label":"change date"}})),r.a.createElement(N.a,{variant:"contained",color:"primary",className:"add",type:"submit",onClick:this.handleSubmit},"Add Book"),r.a.createElement(N.a,{variant:"contained",color:"primary",className:"cancel",onClick:function(){return e.props.setShowAddBook(!1)}},"Cancel"))))}}]),a}(n.Component),K=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(s.a)(this,Object(m.a)(a).call(this,e))).handleChange=function(e){t.setState(Object(p.a)({},e.target.name,e.target.value))},t.handleTimeChange=function(e){t.setState({date:e})},t.handleSubmit=function(){var e=Object(b.a)(g.a.mark((function e(a){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,E.a.post("/api/books/edit",{headers:{Authorization:"Bearer ".concat(k()),bookId:t.state.bookId},data:{title:t.state.title,author:t.state.author,date:t.state.date,userId:t.state.userId}});case 4:n=e.sent,r={title:t.state.title,author:t.state.author,date:t.state.date,userId:t.state.userId},t.props.updateDisplay(r),console.log("Edited record: ".concat(n)),t.props.setShowEdit(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),t.setState({message:e.t0}),console.log(t.state.message);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(a){return e.apply(this,arguments)}}(),t.state={bookId:t.props.book._id,userId:t.props.book.userId,title:t.props.book.title,author:t.props.book.author,date:t.props.book.date},t}return Object(u.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"add-new-modal"},r.a.createElement("div",{className:"add-new-wrapper"},r.a.createElement("h4",null,"Edit Book"),r.a.createElement("form",{autoComplete:"off",onSubmit:this.handleSubmit},r.a.createElement(Y.a,{onChange:this.handleChange,type:"text",name:"title",label:"With normal TextField",id:"title",placeholder:"Title",className:"classes.input"}),r.a.createElement(Y.a,{onChange:this.handleChange,name:"author",type:"text",label:"With normal TextField",id:"author",placeholder:"Author",className:"classes.input"}),r.a.createElement(P.a,{utils:z.a},r.a.createElement(_.a,{name:"bookDate",variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"bookDate",onChange:this.handleTimeChange,KeyboardButtonProps:{"aria-label":"change date"}})),r.a.createElement(N.a,{variant:"contained",color:"primary",className:"submit",type:"submit",onClick:this.handleSubmit},"Save"),r.a.createElement(N.a,{variant:"contained",color:"primary",className:"cancel",onClick:function(){return e.props.setShowEdit(!1)}},"Cancel"))))}}]),a}(n.Component),R=(t(137),t(173)),H=t(177),$=t(179),G=t(178),Q=t(81),V=t.n(Q),X=t(82),Z=t.n(X),ee=t(83),ae=t.n(ee),te=Object(x.a)((function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper}}})),ne=function(e){var a=e.book,t=e.hideMoreInfo,o=Object(n.useState)(!1),l=Object(d.a)(o,2),c=l[0],i=l[1],s=Object(n.useState)(!1),m=Object(d.a)(s,2),u=m[0],p=m[1],h=Object(n.useState)(!1),g=Object(d.a)(h,2),b=g[0],f=g[1],E=(te(),a);return r.a.createElement(r.a.Fragment,null,u?r.a.createElement(K,{setShowEdit:p,book:E,updateDisplay:function(e){E.date=e.date,E.title=e.title,E.author=e.author}}):r.a.createElement("div",{className:"show-more-modal"},c?r.a.createElement(M,{finishDelete:function(){f(!0)},cancel:function(){return i(!1)},book:E}):r.a.createElement("div",{className:"show-more-wrapper"},b?r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Book Deleted!"),r.a.createElement("div",{className:"close-wrap"},r.a.createElement(N.a,{variant:"contained",color:"primary",className:"close",onClick:t},"Close"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"close"},r.a.createElement(N.a,{variant:"contained",color:"primary",className:"cancel",onClick:t},"Close")),r.a.createElement("div",{className:"edit-content"},r.a.createElement(R.a,{className:"classes.root"},r.a.createElement(H.a,null,r.a.createElement(G.a,null,r.a.createElement(w.a,null,r.a.createElement(V.a,null))),r.a.createElement($.a,{primary:"Title",secondary:E.title})),r.a.createElement(H.a,null,r.a.createElement(G.a,null,r.a.createElement(w.a,null,r.a.createElement(Z.a,null))),r.a.createElement($.a,{primary:"Author",secondary:E.author})),r.a.createElement(H.a,null,r.a.createElement(G.a,null,r.a.createElement(w.a,null,r.a.createElement(ae.a,null))),r.a.createElement($.a,{primary:"Date",format:"YYYY-D-M",secondary:E.date})))),r.a.createElement(N.a,{variant:"contained",color:"primary",className:"cancel",onClick:function(){return i(!0)}},"Delete Book"),r.a.createElement(N.a,{variant:"contained",color:"primary",className:"cancel",onClick:function(){return p(!0)}},"Edit Book")))))},re=(t(138),t(87)),oe=t(85),le=t.n(oe),ce=t(84),ie=t.n(ce),se=function(e){var a=Object(n.useState)([]),t=Object(d.a)(a,2),o=t[0],l=t[1],c=Object(n.useState)({}),i=Object(d.a)(c,2),s=i[0],m=i[1],u=Object(n.useState)(!1),p=Object(d.a)(u,2),h=p[0],f=p[1],v=Object(n.useState)(!1),w=Object(d.a)(v,2),y=w[0],j=w[1],C=function(){var e=Object(b.a)(g.a.mark((function e(a){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.post("/api/books",{headers:{Authorization:"Bearer ".concat(k())},data:{userId:a}});case 3:t=e.sent,(n=t.data.data).sort((function(e,a){return e.date>a.date?1:-1})),l(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){C(e.userId)}),[e.userId,o]);e.userName;return r.a.createElement("section",{className:"book-list"},r.a.createElement("h1",null,"Books Library"),r.a.createElement("div",{className:"addbtn"},r.a.createElement(N.a,{onClick:function(){return j(!0)},variant:"contained",color:"secondary",className:"add-new-button classes.button",startIcon:r.a.createElement(ie.a,null)},"Add Book")),y&&r.a.createElement(J,{setShowAddBook:j,userId:e.userId}),h&&r.a.createElement(ne,{book:s,hideMoreInfo:function(){m({}),f(!1)}}),r.a.createElement("div",null,o.map((function(e){return r.a.createElement("div",{className:"library"},r.a.createElement(W.a,{className:"classes.paper"},r.a.createElement(O.a,{container:!0,spacing:2},r.a.createElement(O.a,{item:!0},r.a.createElement(re.a,{className:"classes.image"},r.a.createElement(le.a,{className:"largeIcon"}))),r.a.createElement(O.a,{item:!0,xs:12,sm:!0,container:!0},r.a.createElement(O.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2},r.a.createElement(O.a,{item:!0,xs:!0},r.a.createElement(S.a,{className:"title",gutterBottom:!0,variant:"subtitle1"},e.title),r.a.createElement(S.a,{className:"author",variant:"subtitle1",gutterBottom:!0},"Author: ",e.author)),r.a.createElement(O.a,{item:!0},r.a.createElement(S.a,{variant:"subtitle1",style:{cursor:"pointer"}},r.a.createElement(U.a,{date:e.date,format:"YYYY-D-M"})))),r.a.createElement(O.a,{item:!0,className:"remove"},r.a.createElement(S.a,{variant:"subtitle1"},r.a.createElement(N.a,{variant:"contained",color:"primary",className:"more",onClick:function(){return function(e){m(e),f(!0)}(e)}},"Edit")))))))}))))},me=(t(139),function(e){var a=e.isLoggedIn,t=e.firstName,n=(e.showLogin,e.logOut);return r.a.createElement("header",null,r.a.createElement("div",{className:"header-wrapper"},a?r.a.createElement("p",null,"Hello, ",t," | ",r.a.createElement("button",{className:"login",onClick:n},"Log out")):r.a.createElement("p",null,r.a.createElement("button",{className:"login"}))))}),ue=(t(140),function(e){function a(){var e;return Object(c.a)(this,a),(e=Object(s.a)(this,Object(m.a)(a).call(this))).hideLogin=function(){e.setState({showLogin:!1})},e.showLogin=function(){e.setState({showLogin:!0})},e.setUser=function(a,t,n){e.setState({isLoggedIn:!0,showLogin:!1,userId:t,firstName:n,token:{}})},e.logOut=function(a){a.preventDefault(),e.setState({isLoggedIn:!1,showLogin:!0,firstName:"",userId:"",token:{}})},e.state={isLoggedIn:!1,showLogin:!0,userId:"",firstName:"",token:{}},e}return Object(u.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"app"},this.state.showLogin&&r.a.createElement(q,{hideLogin:this.hideLogin,setUser:this.setUser}),r.a.createElement(me,{isLoggedIn:this.state.isLoggedIn,firstName:this.state.firstName,logOut:this.logOut}),r.a.createElement("div",{className:"wrapper"},this.state.isLoggedIn&&r.a.createElement(se,{userId:this.state.userId,userName:this.state.firstName})))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},76:function(e,a,t){}},[[103,1,2]]]);
//# sourceMappingURL=main.03578d8a.chunk.js.map